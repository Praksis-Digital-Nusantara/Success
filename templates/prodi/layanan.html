{% extends "prodi/base.html" %}




{% block content1 %}
<div class="dashboard-content">
	<div class="student-list-container">
		<div class="list-header">
			<div class="list-title">
				<h2>{{ heading }}</h2>
				<p>{{web_name}}</p>
			</div>
			<div class="list-filters">
				<div class="table-actions">
					<div class="action-group">
						<div class="search-bar-table">
							<i class="ri-search-line"></i>
							<input type="text" id="searchInput" placeholder="Search table...">
						</div>
					</div>
					<div class="action-group">
						<button class="btn primary" onclick="openModal('nomorsurat')">
							<i class="ri-add-line"></i>
							<span>Add</span>
						</button>
						<button class="btn danger" id="deleteSelected">
							<i class="ri-delete-bin-line"></i>
							<span>Delete</span>
						</button>
						<button class="btn secondary" id="exportTable">
							<i class="ri-download-line"></i>
							<span>Export</span>
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="student-table">
			<div class="table-responsive">
			<table>
				<thead>
					<tr>
					<th>No</th>
					<th>Date In</th>
					<th>Mahasiswa</th>
					<th>Prodi</th>
					<th>Layanan</th>
					<th>Status</th>
					<th>Aksi</th>
					</tr>
				</thead>
				<tbody>
					{% for layanan in layanan_data %}
					<tr>
					<td>{{ forloop.counter }}</td>
					<td>{{ layanan.date_in|date:"d M Y H:i" }}</td>
					<td>{{ layanan.mhs }}</td>
					<td>{{ layanan.prodi }}</td>
					<td>
						<b>{{ layanan.layanan_jenis }}</b>
						<div class="layanan-content">{{ layanan.layanan_isi }}</div>
						{% if layanan.layanan_file %}
							<a target="_blank" href="/{{ layanan.layanan_file }}">
								<button class="action-btn"><i class="ri-file-line"></i> File</button>
							</a>
						{% endif %}
					</td>				  
					<td>
						{% if layanan.status == 'Waiting'  %}
							<span class="grade-badge c">{{ layanan.status }}</span>
						{% elif layanan.status == 'Processing'  %}
							<span class="grade-badge b">{{ layanan.status }}</span>
						{% elif layanan.status == 'Rejected'  %}
							<span class="grade-badge d">{{ layanan.status }}</span>
						{% elif layanan.status == 'Completed'  %}
							<span class="grade-badge a">{{ layanan.status }}</span>
						{% endif %}
						{% if layanan.hasil_test %}
							<div class="response-text">{{ layanan.hasil_test }}</div>
						{% endif %}
						<div class="button-group">
							{% if layanan.hasil_link %}
								<a target="_blank" href="{{ layanan.hasil_link }}">
									<button class="upload-btn"><i class="ri-link"></i> Link</button>
								</a>  
							{% endif %}
							{% if layanan.hasil_file %}
								<a target="_blank" href="/{{ layanan.hasil_file }}">
									<button class="upload-btn"><i class="ri-file-line"></i> File</button>
								</a>
							{% endif %}
						</div>
					</td> 
					<td>	
						<a href="{% url 'acd:layanan_edit' layanan.id %}">
							<button class="action-btn"><i class="ri-pencil-fill"></i></button>
						</a>
					</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		</div>
	</div>
</div>
		
{% endblock content1 %}

