{% extends "mhs/base.html" %}

{% block content1 %}
<div class="dashboard-content">
	<div class="profile-section">
	<div class="container-header">
		<nav class="container-breadcrumb">
			<ul>
				<li>
					<a href="{% url 'acd:dashboard' %}">
						<i class="ri-home-line"></i>
					</a>
				</li>
				<li>
					<i class="ri-arrow-right-s-line"></i>
				</li>
				<li>
					<a href="{% url 'acd:layanan_me' %}">Layanan</a>
				</li>
				<li>
					<i class="ri-arrow-right-s-line"></i>
				</li>
				<li>
					<a href="">{{ heading }}</a>
				</li>
			</ul>
		</nav>
	</div>
		<form method="post"  enctype="multipart/form-data">
			{% csrf_token %}					
			<div class="form-row">
				<div class="form-group">
					<label for="id_layanan_jenis" class="col-form-label">layanan_jenis</label>
					{{ form.layanan_jenis }} 							
				</div>
				<div  class="form-group" id="prasyarat-container" style="margin-top: 20px;">
					<label><strong>Prasyarat Layanan:</strong></label>
					<p id="prasyarat-layanan">Pilih jenis layanan untuk melihat prasyarat.</p>
				</div>
			</div>			

			<div class="form-group">
				<label for="id_layanan_isi" class="col-form-label">Layanan Isi</label>
				{{ form.layanan_isi }}  <!-- Form input untuk email -->
			</div>
			

			<div class="form-group">
				<label for="id_layanan_file" class="col-form-label">File jika ada</label>
				{{ form.layanan_file }}  <!-- Form input untuk first name -->
			</div>
			
			<button type="submit" class="btn btn-primary">Ajukan</button>
		</form> 

		
	</div>
</div>
{% endblock content1 %}



{% block script_costum %} 

	<script>
		// Ambil elemen dropdown dan container prasyarat
		const layananJenisDropdown = document.querySelector('#id_layanan_jenis');
		const prasyaratContainer = document.querySelector('#prasyarat-container');
		const prasyaratLayanan = document.querySelector('#prasyarat-layanan');
	
		// Tambahkan event listener pada dropdown
		layananJenisDropdown.addEventListener('change', function () {
			const layananId = this.value; // Ambil ID dari pilihan dropdown
			if (layananId) {
				// Lakukan AJAX request ke endpoint
				fetch(`/acd/get-prasyarat-layanan/?layanan_id=${layananId}`)
					.then(response => response.json())
					.then(data => {
						if (data.prasyarat_layanan) {
							prasyaratLayanan.textContent = data.prasyarat_layanan; // Tampilkan prasyarat
						} else {
							prasyaratLayanan.textContent = 'Prasyarat tidak ditemukan.';
						}
					})
					.catch(error => {
						console.error('Error fetching prasyarat:', error);
						prasyaratLayanan.textContent = 'Terjadi kesalahan saat mengambil prasyarat.';
					});
			} else {
				prasyaratLayanan.textContent = 'Pilih jenis layanan untuk melihat prasyarat.';
			}
		});
	</script>

{% endblock script_costum %} 

